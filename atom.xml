<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>RPChen`s Blog</title>
  
  <subtitle>The quieter you become,the more you are able to hear.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.rpchen.com/"/>
  <updated>2017-12-29T03:44:34.913Z</updated>
  <id>http://www.rpchen.com/</id>
  
  <author>
    <name>RPChen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>三星工程代码</title>
    <link href="http://www.rpchen.com/2017/12/06/e4-b8-89-e6-98-9f-e5-b7-a5-e7-a8-8b-e4-bb-a3-e7-a0-81/"/>
    <id>http://www.rpchen.com/2017/12/06/e4-b8-89-e6-98-9f-e5-b7-a5-e7-a8-8b-e4-bb-a3-e7-a0-81/</id>
    <published>2017-12-06T00:43:58.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<p>&nbsp;</p><p>1. *#06#:查询手机串号(IMEI)</p><p>2. *#1111#：查询FTA SW版本</p><p>3. *#2222#：查询FTA HW版本</p><p>4. *#1234#：查询固件版本号</p><p>5. <em>#0</em>#：进入工程模式</p><p>6. *#0228#：电池状态</p><p>7. <em>#12580</em>369#：软硬件信息、出厂日期</p><p>8. *#2663#： 固件信息更新等(TSP FW\TOUCH KEY FWSENSORHUB FW等)</p><p>9. *#34971539#：相机固件相关</p><p>10. *#7353#：快速测试菜单</p><p>11. *#0011#：网络信息、信号强度等</p><p>12. *#0283# ：looback 测试</p><p>13. *#0808#：USB设置</p><p>14. *#9090#：service 模式</p><p>15. *#9900#：SysDump</p><p><span style="font-family: Montserrat, sans-serif; font-size: 16px; font-style: normal; font-weight: 400;">20.#2683662#</span><span style="font-family: Montserrat, sans-serif; font-size: 16px; font-style: normal; font-weight: 400;">：</span><span style="font-family: Montserrat, sans-serif; font-size: 16px; font-style: normal; font-weight: 400;">工程模式调网络代码</span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&amp;nbsp;&lt;/p&gt;
&lt;p&gt;1. *#06#:查询手机串号(IMEI)&lt;/p&gt;
&lt;p&gt;2. *#1111#：查询FTA SW版本&lt;/p&gt;
&lt;p&gt;3. *#2222#：查询FTA HW版本&lt;/p&gt;
&lt;p&gt;4. *#1234#：查询固件版本号&lt;/p&gt;
&lt;p&gt;5. &lt;em&gt;#0&lt;
      
    
    </summary>
    
      <category term="移动终端" scheme="http://www.rpchen.com/categories/%E7%A7%BB%E5%8A%A8%E7%BB%88%E7%AB%AF/"/>
    
    
  </entry>
  
  <entry>
    <title>ESXI强制标记硬盘SSD</title>
    <link href="http://www.rpchen.com/2017/12/04/esxi-e5-bc-ba-e5-88-b6-e6-a0-87-e8-ae-b0-e7-a1-ac-e7-9b-98ssd/"/>
    <id>http://www.rpchen.com/2017/12/04/esxi-e5-bc-ba-e5-88-b6-e6-a0-87-e8-ae-b0-e7-a1-ac-e7-9b-98ssd/</id>
    <published>2017-12-04T08:44:22.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">列出：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> esxcli storage core device list</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 标记：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> esxcli storage nmp satp rule add -s VMW_SATP_LOCAL -d naa.6b8ca3a0f451a90021a1485e0526587c -o enable_ssd</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 回收：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> esxcli storage core claiming reclaim -d naa.6b8ca3a0f451a90021a1485e0526587c</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 查看：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> esxcli storage core device list -d naa.6b8ca3a0f451a90021a1485e0526587c</span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 10pt;&quot;&gt;列出：&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-
      
    
    </summary>
    
      <category term="笔记存档" scheme="http://www.rpchen.com/categories/%E7%AC%94%E8%AE%B0%E5%AD%98%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>申请Lets Encrypt证书</title>
    <link href="http://www.rpchen.com/2017/12/04/e7-94-b3-e8-af-b7lets-encrypt-e8-af-81-e4-b9-a6/"/>
    <id>http://www.rpchen.com/2017/12/04/e7-94-b3-e8-af-b7lets-encrypt-e8-af-81-e4-b9-a6/</id>
    <published>2017-12-04T08:30:31.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">yum install git-all</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> yum install epel-release</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> git clone <a href="https://github.com/certbot/certbot" target="_blank" rel="noopener">https://github.com/certbot/certbot</a></span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> cd certbot</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> ./letsencrypt-auto certolny -d www.rpchen.com</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> vi /etc/httpd/conf/httpd.conf</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> vi /etc/httpd/conf.d/ssl.conf</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">apache下，修改ssl.conf文件</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> #Listen 443 https</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> &lt;VirtualHost _default_s:443&gt;</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> DocumentRoot “/var/www/html”</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> ServerName www.rpchen.com:443</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> SSLEngine on</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> SSLCertificateFile /etc/letsencrypt/live/www.rpchen.com/fullchain.pem</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> SSLCertificateKeyFile /etc/letsencrypt/live/www.rpchen.com/privkey.pem</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> &lt;/VirtualHost&gt;</span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 10pt;&quot;&gt;yum install git-all&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-family: arial, 
      
    
    </summary>
    
      <category term="笔记存档" scheme="http://www.rpchen.com/categories/%E7%AC%94%E8%AE%B0%E5%AD%98%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>vsftpd配置文件详解</title>
    <link href="http://www.rpchen.com/2017/12/04/vsftpd-e9-85-8d-e7-bd-ae-e6-96-87-e4-bb-b6-e8-af-a6-e8-a7-a3/"/>
    <id>http://www.rpchen.com/2017/12/04/vsftpd-e9-85-8d-e7-bd-ae-e6-96-87-e4-bb-b6-e8-af-a6-e8-a7-a3/</id>
    <published>2017-12-04T08:09:37.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>vsftpd**</strong>配置文件详解<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">1.<strong>**默认配置：</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">1&gt;允许匿名用户和本地用户登陆。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">     anonymous_enable=YES</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">     local_enable=YES</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">2&gt;匿名用户使用的登陆名为ftp或anonymous，口令为空；匿名用户不能离开匿名用户家目录/var/ftp,且只能下载不能上传。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">3&gt;本地用户的登录名为本地用户名，口令为此本地用户的口令；本地用户可以在自 己家目录中进行读写操作；本地用户可以离开自家目录切换至有权限访问的其他目录，并在权限允许的情况下进行上传/下载。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">    write_enable=YES</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">4&gt;写在文件/etc/vsftpd.ftpusers中的本地用户禁止登陆。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">            </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>2.**</strong>配置文件格式：  <strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">vsftpd.conf 的内容非常单纯，每一行即为一项设定。若是空白行或是开头为#的一行，将会被忽略。内容的格式只有一种，如下所示</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">option=value</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">要注意的是，等号两边不能加空白。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">3.<strong>**匿名用户（anonymous）设置</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>anonymous_enable=YES/NO**</strong>（YES）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">控制是否允许匿名用户登入，YES 为允许匿名登入，NO 为不允许。默认值为YES。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">write_enable=YES/NO<strong>**（YES）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">是否允许登陆用户有写权限。属于全局设置，默认值为YES。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>no_anon_password=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">若是启动这项功能，则使用匿名登入时，不会询问密码。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">ftp_username=ftp</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">定义匿名登入的使用者名称。默认值为ftp。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">anon_root=/var/ftp</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">使用匿名登入时，所登入的目录。默认值为/var/ftp。注意ftp目录不能是777的权限属性，即匿名用户的家目录不能有777的权限。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">anon_upload_enable=YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果设为YES，则允许匿名登入者有上传文件（非目录）的权限，只有在write_enable=YES时，此项才有效。当然，匿名用户必须要有对上层目录的写入权。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>anon_world_readable_only=YES/NO**</strong>（YES）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果设为YES，则允许匿名登入者下载可阅读的档案（可以下载到本机阅读，不能直接在FTP服务器中打开阅读）。默认值为YES。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">anon_mkdir_write_enable=YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果设为YES，则允许匿名登入者有新增目录的权限，只有在write_enable=YES时，此项才有效。当然，匿名用户必须要有对上层目录的写入权。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>anon_other_write_enable=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果设为YES，则允许匿名登入者更多于上传或者建立目录之外的权限，譬如删除或者重命名。（如果anon_upload_enable=NO，则匿名用户不能上传文件，但可以删除或者重命名已经存在的文件；如果anon_mkdir_write_enable=NO，则匿名用户不能上传或者新建文件夹，但可以删除或者重命名已经存在的文件夹。）默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">chown_uploads=YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置是否改变匿名用户上传文件（非目录）的属主。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">chown_username=username</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置匿名用户上传文件（非目录）的属主名。建议不要设置为root。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">anon_umask=077</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置匿名登入者新增或上传档案时的umask 值。默认值为077，则新建档案的对应权限为700。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>deny_email_enable=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">若是启动这项功能，则必须提供一个档案/etc/vsftpd/banner_emails，内容为email address。若是使用匿名登入，则会要求输入email address，若输入的email address 在此档案内，则不允许进入。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">banned_email_file=/etc/vsftpd/banner_emails</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">此文件用来输入email address，只有在deny_email_enable=YES时，才会使用到此档案。若是使用匿名登入，则会要求输入email address，若输入的email address 在此档案内，则不允许进入。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">4.<strong>**本地用户设置</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>local_enable=YES/NO**</strong>（YES）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">控制是否允许本地用户登入，YES 为允许本地用户登入，NO为不允许。默认值为YES。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">local_root=/home/username</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">当本地用户登入时，将被更换到定义的目录下。默认值为各用户的家目录。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">write_enable=YES/NO<strong>**（YES）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">是否允许登陆用户有写权限。属于全局设置，默认值为YES。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">local_umask=022</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">本地用户新增档案时的umask 值。默认值为077。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">file_open_mode=0755</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">本地用户上传档案后的档案权限，与chmod 所使用的数值相同。默认值为0666。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>5.**</strong>欢迎语设置<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">dirmessage_enable=YES/NO<strong>**（YES）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果启动这个选项，那么使用者第一次进入一个目录时，会检查该目录下是否有.message这个档案，如果有，则会出现此档案的内容，通常这个档案会放置欢迎话语，或是对该目录的说明。默认值为开启。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">message_file=.message</span></strong></span></div><br><div><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置目录消息文件，可将要显示的信息写入该文件。默认值为.message。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">banner_file=/etc/vsftpd/banner</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">当使用者登入时，会显示此设定所在的档案内容，通常为欢迎话语或是说明。默认值为无。如果欢迎信息较多，则使用该配置项。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">ftpd_banner=Welcome to BOB’s FTP server</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">这里用来定义欢迎话语的字符串，banner_file是档案的形式，而ftpd_banner 则是字符串的形式。预设为无。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>6.**</strong>控制用户是否允许切换到上级目录<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">在默认配置下，本地用户登入FTP后可以使用cd命令切换到其他目录，这样会对系统带来安全隐患。可以通过以下三条配置文件来控制用户切换目录。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">chroot_list_enable=YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置是否启用chroot_list_file配置项指定的用户列表文件。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">chroot_list_file=/etc/vsftpd.chroot_list</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">用于指定用户列表文件，该文件用于控制哪些用户可以切换到用户家目录的上级目录。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>chroot_local_user=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">用于指定用户列表文件中的用户是否允许切换到上级目录。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">通过搭配能实现以下几种效果：<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">①</span><strong>当chroot_list_enable=YES，chroot_local_user=YES时，在/etc/vsftpd.chroot_list文件中列出的用户，可以切换到其他目录；未在文件中列出的用户，不能切换到其他目录。</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">②</span><strong>当chroot_list_enable=YES，chroot_local_user=NO时，在/etc/vsftpd.chroot_list文件中列出的用户，不能切换到其他目录；未在文件中列出的用户，可以切换到其他目录。</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">③</span><strong>当chroot_list_enable=NO，chroot_local_user=YES时，所有的用户均不能切换到其他目录。</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">④</span><strong>当chroot_list_enable=NO，chroot_local_user=NO时，所有的用户均可以切换到其他目录。</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">7.<strong>**数据传输模式设置</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">FTP在传输数据时，可以使用二进制方式，也可以使用ASCII模式来上传或下载数据。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>ascii_upload_enable=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置是否启用ASCII 模式上传数据。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">ascii_download_enable=YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置是否启用ASCII 模式下载数据。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>8.**</strong>访问控制设置<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">两种控制方式：一种控制主机访问，另一种控制用户访问。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #0000ff;">①控制主机访问：</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">tcp_wrappers=YES/NO<strong>**（YES）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置vsftpd是否与tcp wrapper相结合来进行主机的访问控制。默认值为YES。如果启用，则vsftpd服务器会检查/etc/hosts.allow 和/etc/hosts.deny 中的设置，来决定请求连接的主机，是否允许访问该FTP服务器。这两个文件可以起到简易的防火墙功能。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">比如：若要仅允许192.168.0.1—192.168.0.254的用户可以连接FTP服务器，则在/etc/hosts.allow文件中添加以下内容：</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">vsftpd:192.168.0. :allow</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">all:all :deny</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #0000ff;">②控制用户访问：</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">对于用户的访问控制可以通过/etc目录下的vsftpd.user_list和ftpusers文件来实现。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">userlist_file=/etc/vsftpd.user_list</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">控制用户访问FTP的文件，里面写着用户名称。一个用户名称一行。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>userlist_enable=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">是否启用vsftpd.user_list文件。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">userlist_deny=YES/NO<strong>**（YES）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">决定vsftpd.user_list文件中的用户是否能够访问FTP服务器。若设置为YES，则vsftpd.user_list文件中的用户不允许访问FTP，若设置为NO，则只有vsftpd.user_list文件中的用户才能访问FTP。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">/etc/vsftpd/ftpusers</span></strong>文件专门用于定义不允许访问FTP服务器的用户列表（<strong>注意</strong>:如果userlist_enable=YES,userlist_deny=NO,此时如果在vsftpd.user_list和ftpusers中都有某个用户时，那么这个用户是不能够访问FTP的，即ftpusers的优先级要高）。默认情况下vsftpd.user_list和ftpusers，这两个文件已经预设置了一些不允许访问FTP服务器的系统内部账户。如果系统没有这两个文件，那么新建这两个文件，将用户添加进去即可。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>9.**</strong>访问速率设置<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">anon_max_rate=0</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置匿名登入者使用的最大传输速度，单位为B/s，0 表示不限制速度。默认值为0。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">local_max_rate=0</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">本地用户使用的最大传输速度，单位为B/s，0 表示不限制速度。预设值为0。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">10.<strong>**超时时间设置</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">accept_timeout=60</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置建立FTP连接的超时时间，单位为秒。默认值为60。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">connect_timeout=60</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">PORT 方式下建立数据连接的超时时间，单位为秒。默认值为60。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">data_connection_timeout=120</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置建立FTP数据连接的超时时间，单位为秒。默认值为120。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">idle_session_timeout=300</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置多长时间不对FTP服务器进行任何操作，则断开该FTP连接，单位为秒。默认值为300 。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>11.**</strong>日志文件设置<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">xferlog_enable= YES/NO<strong>**（YES）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">是否启用上传/下载日志记录。如果启用，则上传与下载的信息将被完整纪录在xferlog_file 所定义的档案中。预设为开启。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">xferlog_file=/var/log/vsftpd.log</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置日志文件名和路径，默认值为/var/log/vsftpd.log。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>xferlog_std_format=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果启用，则日志文件将会写成xferlog的标准格式，如同wu-ftpd 一般。默认值为关闭。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">log_ftp_protocol=YES|NO<strong>**（NO）</strong><br></span>如果启用此选项，所有的FTP请求和响应都会被记录到日志中，默认日志文件在/var/log/vsftpd.log。启用此选项时，xferlog_std_format不能被激活。这个选项有助于调试。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>12.**</strong>定义用户配置文件<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">在vsftpd中，可以通过定义用户配置文件来实现不同的用户使用不同的配置。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">user_config_dir=/etc/vsftpd/userconf</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置用户配置文件所在的目录。当设置了该配置项后，用户登陆服务器后，系统就会到/etc/vsftpd/userconf目录下，读取与当前用户名相同的文件，并根据文件中的配置命令，对当前用户进行更进一步的配置。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">例如：定义user_config_dir=/etc/vsftpd/userconf，且主机上有使用者 test1,test2，那么我们就在user_config_dir 的目录新增文件名为test1和test2两个文件。若是test1 登入，则会读取user_config_dir 下的test1 这个档案内的设定。默认值为无。利用用户配置文件，可以实现对不同用户进行访问速度的控制，在各用户配置文件中定义local_max_rate=XX，即可。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">13.FTP<strong>**的工作方式与端口设置</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">FTP有两种工作方式：PORT FTP（主动模式）和PASV FTP（被动模式）</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">listen_port=21</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置FTP服务器建立连接所监听的端口，默认值为21。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">connect_from_port_20=YES/NO</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">指定FTP使用20端口进行数据传输，默认值为YES。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">ftp_data_port=20</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置在PORT方式下，FTP数据连接使用的端口，默认值为20。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>pasv_enable=YES/NO**</strong>（YES）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">若设置为YES，则使用PASV工作模式；若设置为NO，则使用PORT模式。默认值为YES，即使用PASV工作模式。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">pasv_max_port=0</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">在PASV工作模式下，数据连接可以使用的端口范围的最大端口，0 表示任意端口。默认值为0。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">pasv_min_port=0</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">在PASV工作模式下，数据连接可以使用的端口范围的最小端口，0 表示任意端口。默认值为0。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">14.<strong>**与连接相关的设置</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>listen=YES/NO**</strong>（YES）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置vsftpd服务器是否以standalone模式运行。以standalone模式运行是一种较好的方式，此时listen必须设置为YES，此为默认值。建议不要更改，有很多与服务器运行相关的配置命令，需要在此模式下才有效。若设置为NO，则vsftpd不是以独立的服务运行，要受到xinetd服务的管控，功能上会受到限制。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">max_clients=0</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置vsftpd允许的最大连接数，默认值为0，表示不受限制。若设置为100时，则同时允许有100个连接，超出的将被拒绝。只有在standalone模式运行才有效。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">max_per_ip=0</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置每个IP允许与FTP服务器同时建立连接的数目。默认值为0，表示不受限制。只有在standalone模式运行才有效。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">listen_address=IP<strong>**地址</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置FTP服务器在指定的IP地址上侦听用户的FTP请求。若不设置，则对服务器绑定的所有IP地址进行侦听。只有在standalone模式运行才有效。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>setproctitle_enable=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置每个与FTP服务器的连接，是否以不同的进程表现出来。默认值为NO，此时使用ps aux |grep ftp只会有一个vsftpd的进程。若设置为YES，则每个连接都会有一个vsftpd的进程。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">15.<strong>**虚拟用户设置</strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">虚拟用户使用PAM认证方式。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong><span style="color: #ff0000;">pam_service_name=vsftpd</span></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置PAM使用的名称，默认值为/etc/pam.d/vsftpd。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>guest_enable= YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">启用虚拟用户。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">guest_username=ftp</span><strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">这里用来映射虚拟用户。默认值为ftp。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">virtual_use_local_privs=YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">当该参数激活（YES）时，虚拟用户使用与本地用户相同的权限。当此参数关闭（NO）时，虚拟用户使用与匿名用户相同的权限。默认情况下此参数是关闭的（NO）。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> </span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><strong>16.**</strong>其他设置<strong></strong></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">text_userdb_names= YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">设置在执行ls –la之类的命令时，是显示UID、GID还是显示出具体的用户名和组名。默认值为NO，即以UID和GID方式显示。若希望显示用户名和组名，则设置为YES。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>ls_recurse_enable=YES/NO**</strong>（NO）<strong></strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">若是启用此功能，则允许登入者使用ls –R（可以查看当前目录下子目录中的文件）这个指令。默认值为NO。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;">hide_ids=YES/NO<strong>**（NO）</strong></span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果启用此功能，所有档案的拥有者与群组都为ftp，也就是使用者登入使用ls -al之类的指令，所看到的档案拥有者跟群组均为ftp。默认值为关闭。</span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"><span style="color: #ff0000;"><strong>download_enable=YES/NO**</strong>（YES）**</span></span></div><br><div><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">如果设置为NO，所有的文件都不能下载到本地，文件夹不受影响。默认值为YES。</span></div><br><div></div><br><div></div><br><div></div><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">FTPS+被动</span><br><br>&nbsp;<br><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">anonymous_enable=NO</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">connect_from_port_20=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">dirmessage_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">force_local_data_ssl=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">force_local_logins_ssl=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">implicit_ssl=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">listen=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">local_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">local_umask=022</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">pam_service_name=vsftpd</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">pasv_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">rsa_cert_file=/etc/letsencrypt/live/www.rpchen.com/fullchain.pem</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">rsa_private_key_file=/etc/letsencrypt/live/www.rpchen.com/privkey.pem</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">ssl_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">ssl_sslv2=NO</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">ssl_sslv3=NO</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">ssl_tlsv1=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">tcp_wrappers=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">userlist_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">write_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">xferlog_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">xferlog_std_format=YES</span><br><br>&nbsp;<br><br>&nbsp;<br><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">主动</span><br><div><br><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">anonymous_enable=NO</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">connect_from_port_20=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">dirmessage_enable=YES</span><br><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">listen=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">local_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">local_umask=022</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">pam_service_name=vsftpd</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">pasv_enable=NOtcp_wrappers=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">userlist_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">write_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">xferlog_enable=YES</span><br><span style="font-family: Arial, Helvetica, sans-serif; font-size: 8pt;">xferlog_std_format=YES</span><br><br></div><br><div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 10pt;&quot;&gt;&lt;strong&gt;vsftpd**&lt;/strong&gt;配置文件详解&lt;strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/div&gt;
      
    
    </summary>
    
      <category term="转载存档" scheme="http://www.rpchen.com/categories/%E8%BD%AC%E8%BD%BD%E5%AD%98%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>RedHat命令</title>
    <link href="http://www.rpchen.com/2017/12/04/redhat-e5-91-bd-e4-bb-a4/"/>
    <id>http://www.rpchen.com/2017/12/04/redhat-e5-91-bd-e4-bb-a4/</id>
    <published>2017-12-04T08:05:04.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">帮助手册：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> man **</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 查看进程：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> PS</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">监听端口：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> netstat -anp | grep 665</span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 10pt;&quot;&gt;帮助手册：&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-family: arial, helvetica, san
      
    
    </summary>
    
      <category term="笔记存档" scheme="http://www.rpchen.com/categories/%E7%AC%94%E8%AE%B0%E5%AD%98%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>PowerShell命令</title>
    <link href="http://www.rpchen.com/2017/12/04/powershell-e5-91-bd-e4-bb-a4/"/>
    <id>http://www.rpchen.com/2017/12/04/powershell-e5-91-bd-e4-bb-a4/</id>
    <published>2017-12-04T07:53:38.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">查询值：<span lang="EN-US"><br>Get-ADUser -Filter {pager -eq “a1”}</span></span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">修改值：</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">Set-ADUser <strong><em> -DisplayName *</em></strong></span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">get-ADUser -Filter {employeeid -eq “010738955”}|Set-ADUser -employeeid 01073895</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">Import-Csv -Path c:\abc.csv | foreach {Set-ADUser -Identity $<em>.name -DisplayName $</em>.DisplayName}</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">查询导出：</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">Get-ADUser -Filter <em> -Properties </em> -SearchBase “OU=GZ,DC=CONTOSO,DC=COM” | Select-Object name,department |Export-Csv -NoTypeInformation -Encoding UTF8 -Path “c:\dep.csv”</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">批量导入查询导出：</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">Import-Csv -Path d:\1.csv | foreach {Get-ADUser $_.name -Properties * } |select name,LogonWorkstations|Export-Csv -NoTypeInformation -Encoding UTF8 -Path “d:\dep.csv”</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">新建：</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">New-ADUser -Name ken -DisplayName ken -SamAccountName ken -Company canway -UserPrincipalName ken -AccountPassword (ConvertTo-SecureString 1qaz@WSX -AsPlainText -Force) -Enabled $true -Path “ou=it,ou=gz,dc=contoso,dc=com”</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">批量创建<span lang="EN-US">AD</span>：</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"><span lang="EN-US">Import-csv d:\0.csv | foreach {New-ADUser -Name $<em>.name -description $</em>.FullChineseName -givenName $<em>.FirstName -DisplayName $</em>.name -Samaccountname $<em>.name -UserPrincipalName $</em>.un -Surname $<em>.LastName -Company $</em>.StaffCompany -officephone $<em>.officephone -employeeid $</em>.StaffNo -department $<em>.Department  -manager $</em>.SuperiorManager -title $_.AccountTitle -AccountPassword (ConvertTo-SecureString Kaifa@123 -AsPlainText -Force) -Path “OU=MDBU1_Users,OU=MDBU1,OU=kfft,DC=gwkf,DC=cn” -ChangePasswordAtlogon $True </span>–<span lang="EN-US">Enabled $True}</span></span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">启用<span lang="EN-US">Exchange</span>：</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">Enable-Mailbox -Identity ShuangShuangGuan -Alias ‘ShuangShuangGuan’ -Database ‘KFSZStaff05’</span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">       </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"><span lang="EN-US">       </span>查询用户信息：</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"><span lang="EN-US">Get-MailboxStatistics </span>‘<span lang="EN-US">XiuJuanLi1</span>‘<span lang="EN-US"> | fl</span></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">迁移用户数据库：</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">“<span lang="EN-US">BoXie</span>“<span lang="EN-US"> | New-MoveRequest -TargetDatabase ‘KFDGManagers01’</span></span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">启用<span lang="EN-US">Skype:</span></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"><span lang="EN-US">Enable-CsUser </span>–<span lang="EN-US">Identity ShuangShuangGuan -RegistrarPool SZSkypePool01.gwkf.cn -SipAddressType UserPrincipalName</span></span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"><span lang="EN-US">Import-csv d:\0.csv | foreach {New-ADUser -Name $<em>.name -description $</em>.description -givenName $<em>.givenName -DisplayName $</em>.name -Samaccountname $<em>.name -UserPrincipalName $</em>.un -Surname $<em>.sn -Company $</em>.company  -title $_.title -AccountPassword (ConvertTo-SecureString Kaifa@123 -AsPlainText -Force) -Path “OU=CCBU_Users,OU=CCBU,OU=KFPI,DC=gwkf,DC=cn” -ChangePasswordAtlogon $True </span>–<span lang="EN-US">Enabled $True}</span></span></p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 8pt;"><span lang="EN-US">Import-csv c:\ADuser.csv | foreach {New-ADUser -Name $<em>.Name -DisplayName $</em>.Displayname -Samaccountname $<em>.Samaccountname -UserPrincipalName $</em>.UserPrincipalName -Company $<em>.Company -Department $</em>.Department -Surname $<em>.Surname -GivenName $</em>.GivenName -AccountPassword (ConvertTo-SecureString $<em>.AccountPassword -AsPlainText -Force) -Path $</em>.Path -ChangePasswordAtlogon $True </span>–<span lang="EN-US">Enabled $True}</span></span></p><p>&nbsp;</p><p><span lang="EN-US" style="font-family: arial, helvetica, sans-serif; font-size: 8pt;">Import-csv d:\A.csv|foreach{get-adcomputer $_.computer -properties * }|Select-Object name,operatingsystem |Export-Csv -NoTypeInformation -Encoding UTF8 -Path “d:\c.csv”</span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 8pt;&quot;&gt;查询值：&lt;span lang=&quot;EN-US&quot;&gt;&lt;br&gt;Get-ADUser -Filter {pager -eq “a1”}&lt;/
      
    
    </summary>
    
      <category term="笔记存档" scheme="http://www.rpchen.com/categories/%E7%AC%94%E8%AE%B0%E5%AD%98%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>SSR协议的选择</title>
    <link href="http://www.rpchen.com/2017/12/04/ssr-e5-8d-8f-e8-ae-ae-e7-9a-84-e9-80-89-e6-8b-a9/"/>
    <id>http://www.rpchen.com/2017/12/04/ssr-e5-8d-8f-e8-ae-ae-e7-9a-84-e9-80-89-e6-8b-a9/</id>
    <published>2017-12-04T07:41:46.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">其实这个要说的少得多，总之就一句话，能用auth_aes128_md5或auth_aes128_sha1的，就直接用这两个，最好不要开启兼容，其它的协议都不建议。但如果要解释的话，这个说来话长，需要一点点说明其它的协议的特性。以下简略说明一下各协议的问题。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">首先我们来看原版协议（origin），原版协议有着最少的数据冗余，在没有限制的情况下，必然是原版协议速度最快，这是毫无疑问的。其它的协议的兼容，全是为了兼容原版协议。那既然原版理论上最快为什么不直接用？因为它没有数据完整性校验，无法确认数据是否被篡改，容易被攻击，它也没有做数据包的长度混淆，可以通过数据包长度统计分析检测出来（例如此专利中所说的方案）。当然如果你所在的地区直接使用没有感觉有什么问题，那直接使用就可以了，没有必要考虑后面的。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">接着来看原版的OTA协议，这个协议增加了从客户端到服务端单向的完整性校验，于是服务端到客户端的方向还是存在同样的问题，且它也没有做数据包的长度混淆，一样可以通过数据包长度统计分析检测出来。另外此协议并非能抵抗CCA（Chosen ciphertext attack），依然可以通过CCA来确定这是不是OTA协议（通过服务端行为攻击，具体方法这里不说）。</span></p><p>&nbsp;</p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">然后再看SSR的auth_sha1和auth_sha1_v2协议，这两协议几乎一样，这两协议都有双向的完整性校验，有数据包的长度混淆，有抵抗重放攻击的能力，但缺点是不能完全抵抗CCA，可使用检测OTA的方法检测出来（不用改动一行代码，但无法区分到底是OTA还是auth_sha1，如要确定，那只要对服务端发向客户端的方向发起CCA攻击即可区分）</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">再来看看SSR的auth_sha1_v4协议，相对于auth_sha1，在抵抗CCA方面有改进，但依然不是完全抵抗CCA，尽管多增加了长度校验避免服务端行为攻击，但因为校验使用的是CRC32，而CRC32可以通过已知的正确的数据包，再通过同时修改包长度字段和CRC32来伪造出正确的值，所以虽然攻击难度增加了，但并非完全抵抗CCA。不过某防火墙要如此针对性的攻击此协议的可能性非常低，可以认为基本安全，但如果你条件允许，那还是看下面两个协议吧。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">最后再看看auth_aes128_md5和auth_aes128_sha1，这两协议在关键的认证数据区使用Encrypt-then-MAC，使其无法CCA，而后续的数据包均使用HMAC，且每个连接的不同数据包用的HMAC的KEY都不一样，之前的攻击方案均失效。对于这个协议我自己还没有想到有效的攻击手段，并且此协议的网络利用率比其它的auth系列协议要高，也是唯一一组抗CCA的协议，所以我推荐大家使用这个协议。不过唯一的缺点是这个协议计算量会比其它的协议要多，代码编写较复杂。关于此协议我写了一个简要的文档说明。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">其它花絮：因为auth_aes128_md5协议的前数百个字节不是random的就是HMAC或加密的，总之前面一大堆表面看起来都像是random，所以我曾经试过直接用这个协议裸跑（不使用加密也不使用混淆），结果显示完全能正常使用。但还是不建议大家这么做，毕竟后面还是带着明文的，要是关键字检测会检测到那么后面的话就挂了（但给我的感觉是这个明文关键字检测并不严厉，似乎只针对http, TLS, socks等已知协议）</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">关于协议就简略讲到这里了（如何攻击这里不讲，否则要列举一堆例子和演示代码，更具体的以后会有机会讲的），有什么问题可补充。</span></p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><hr><p>&nbsp;</p><p>&nbsp;</p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">最初我设计这个混淆的时候并没有想到如今产生了如此多的黑科技用法，只是想着伪装为看起来像正常的流量，减少被注意到的可能性而已。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">对于大多数人来说，混淆并不是必须使用的，不使用混淆其实都能正常使用，而且在这当中有近一半人所在的地区的网络，直接使用原版的SS能获得更好的速度。那么什么时候你应该使用混淆呢？第一类是遇到QoS情况的，使用混淆能提速的人，第二类是所在网络有严格限制，仅能使用80/443端口，不认识的协议根本不能用的（如学校、公司、政府办公网络），第三类是对自己的隐私有要求的，希望在运营商的连接记录里留下看起来正常的访问记录，第四类是试图绕过学校或运营商的计费系统的人，第五类其它黑科技用途保密。以上第四类并不在本文的讨论范围，这属于漏洞利用的非法用途。下文仅针对前三类进行展开。</span></p><p>&nbsp;</p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">首先是混淆参数的问题。这个混淆参数可根据你的设定，伪装为对任意host的访问，但我不建议你填写此参数，但建议服务端节点带有域名及正确的解析，这样你不需要填写参数，客户端将直接使用你的节点的域名作为参数。为什么应该这样做呢？因为我了解到，运营商已经在少数地区布置了DNS验证系统（有可能是故意针对SSR的），如果你发出的http/tls请求里的域名解析出的IP地址列表，与你所连接的实际IP不一致，多次请求后就可能会把此IP加入临时黑名单。所以，如果节点有域名，那么参数不写其实是最好的，很多人都习惯写一个大公司网站的域名，其实这反而留下了一个可被检测的地方。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">针对第一类人，关于QoS的问题，唯一的办法就是测试了，各地区不同，不同时间效果也不同，不同端口和混淆参数效果也不同。服务端同时开几个端口，一些开http，一些开tls，多测测测出你认为速度较好的组合使用就好。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">针对第二类人，那么首先要了解清楚所在的网络环境的限制方式，包括访问端口限制，访问域名限制，协议类型限制，访问IP限制。如果你发现存在访问IP限制，那你可以死心了，除非你在此网络下有另一个节点可以通过它作二级代理访问无IP限制的外部网络。对于端口限制，它限制只能哪些端口，那么你在服务端就开哪些端口，而协议类型除了特别变态的，一般都能用http，如果有域名限制，那么混淆参数就填写能用的域名即可。另外很多公司还有一类外网的访问限制，就是必须通过它提供的二级代理，这时你只需要在客户端的二级代理的地方对应的填写一下即可（部分代理可能必须填写UserAgent）。基本上就是见招拆招，如果有太特别的，没法解决的可联系我说说是什么奇葩的限制（例如不少高校网络都要安装专用的登陆（监控）客户端还只能windows使用，还会劫持你流量的方式才能上网，还限制只能单网卡什么的，那确实非常恶心）。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">针对第三类人，如果是联通的比较好办，它提供了可供查询的列表，实验一下你就明白具体效果了。对于其它的运营商，这个列表也绝对是有的，只是不公开给你查询罢了，如果你担心这个，那开启混淆就好了。这种情况下建议使用国内服务器中转并混淆参数使用国内的网站域名。当然，对于这类情况，能更好的减少流量被注意的可能性，即使你所在的网络并没有QoS或其它限制，也能减少被无故限速的风险。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">关于混淆就讲到这里了，有什么问题可补充。下一篇将会讲协议的选择</span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 10pt;&quot;&gt;其实这个要说的少得多，总之就一句话，能用auth_aes128_md5或auth_aes128_sha1的，就直接用这两个，最
      
    
    </summary>
    
      <category term="转载存档" scheme="http://www.rpchen.com/categories/%E8%BD%AC%E8%BD%BD%E5%AD%98%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>SSR单端口多用户配置方法</title>
    <link href="http://www.rpchen.com/2017/12/04/ssr-e5-8d-95-e7-ab-af-e5-8f-a3-e5-a4-9a-e7-94-a8-e6-88-b7-e9-85-8d-e7-bd-ae-e6-96-b9-e6-b3-95/"/>
    <id>http://www.rpchen.com/2017/12/04/ssr-e5-8d-95-e7-ab-af-e5-8f-a3-e5-a4-9a-e7-94-a8-e6-88-b7-e9-85-8d-e7-bd-ae-e6-96-b9-e6-b3-95/</id>
    <published>2017-12-04T07:36:31.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">第一部分：直接修改服务端配置文件大法，仅适用于使用单用户配置的情况</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 首先是服务端的配置</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 服务端把协议(protocol)配置为 auth_aes128_md5 或 auth_aes128_sha1，然后在协议参数(protocol_param)配置所有可用的用户id及其密码，示例如下：</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">“protocol”: “auth_aes128_sha1”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol_param”: “64#12345:breakwa11,233:zhihuyaowan”,</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">含义：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 在#前面的表示每个用户的最大客户端数，照着写这个值或者不填都可以，但必须有#号。在#后，以英文逗号分隔所有的用户，而英文冒号的前面是用户的id，注意这个id必须是范围在 1~2147483647之间，后面的是用户的密码，密码不能有特殊符号，建议仅使用数字和大小写字母</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">然后是客户端的配置（此处配置同样适合下文的其它配置模式）</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 客户端方面非常简单，需要使用用户id为12345的连接，那么在客户端的协议参数(protocol_param)里面填写 12345:breakwa11 就行了，如果使用id为233的同理，其它参数服务端怎么配置的就怎么写</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">那既然多用户可以单端口了，那能不能做得更像一个网站？完全可以的，如果是http的话，服务端安装一个nginx之类，把端口开在8080（监听127.0.0.1），然后SSR的端口开在80，同时在SSR的user-config.json里修改参数 “redirect” : “127.0.0.1:8080”, 这时，直接用浏览器打开，就可以直接看到你开的网站了，而改成用SSR客户端连接就成了服务端了。不过注意的是这时候最好要开相应的混淆哦ヽ(´▽｀)ノ</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">目前这个是刚出的功能，还在测试中，后端和面板还没有相应的支持，也没有流量控制等，建议几个人自己合玩的时候可以这样用，特别地在某些学校或公司这个功能非常好用的哦。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">第二部分：使用mudbjson模式配置（适合单服务器多人合用或试用服务器）</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 2017-02-21更新：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 现mudbjson模式多用户已支持，简要说明如下：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 首先先创建对应的用户id，如果这个id大于65535，那么此用户仅用于多用户模式，小于等于65535时会同时监听这个端口。然后创建多用户端口，相应的protocol_param里就填写”#”就行了，以下是配置示例：</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">[</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “d”: 0,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “enable”: 1,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “method”: “aes-128-cfb”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs”: “tls1.2_ticket_auth_compatible”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “passwd”: “vwHF%35j”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “port”: 12345,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol”: “auth_aes128_sha1”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol_param”: “#”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “transfer_enable”: 1125899906842624,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “u”: 0,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “user”: “12345”</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> },</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “d”: 0,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “enable”: 1,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “method”: “aes-128-cfb”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs”: “tls1.2_ticket_auth_compatible”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “passwd”: “E&amp;iWmlxu”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “port”: 10001,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol”: “auth_sha1_v4”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “transfer_enable”: 536870912,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “u”: 0,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “user”: “10001”</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> },</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “d”: 0,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “enable”: 1,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “method”: “aes-128-cfb”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs”: “tls1.2_ticket_auth_compatible”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “passwd”: “4~fGiKeY”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “port”: 100002,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol”: “auth_sha1_v4”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “transfer_enable”: 10737418240,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “u”: 0,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “user”: “100002”</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> }</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> ]</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">在以上例子中，端口12345是多用户端口（可看成一个公共用户，但无法直接使用），有两个子用户，一个是10001，一个是100002，而10001用户，既可以使用10001端口，也能通过多用户方式使用12345端口。而100002用户只能使用端口12345。在使用端口12345时，实际的使用流量会统计到10001或100002上。注意的是用户10001在配置客户端使用多用户端口12345的话，配置密码为”vwHF%35j”，即除了协议参数均填写此端口的配置，仅协议参数改为”10001:E&amp;iWmlxu”即可。</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">其它：在使用mujson_mgr.py脚本添加协议参数时请使用-G且参数使用英文双引号包起来</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 如有不明白可留言问</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">第三部分：使用面板支持（适合站长多服务器下使用）</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 2017-01-24更新：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 现在已经有支持此单端口多用户的面板及相应的后端，具体参见 <a href="https://github.com/esdeathlove/ss-panel-v3-mod" target="_blank" rel="noopener">https://github.com/esdeathlove/ss-panel-v3-mod</a></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">2017-02-21更新：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 如果使用老面板，包括sspanel和WHMCS等，后端更新到最新后，那么可以在user-config.json内，修改或添加如下字段</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “additional_ports” : {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “6666”: {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “passwd”: “pubpassword”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “method”: “aes-128-ctr”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol”: “auth_aes128_md5”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol_param”: “#”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs”: “tls1.2_ticket_auth_compatible”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs_param”: “”</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> }</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> },</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 其中6666是那个端口（如果要设置多个，就additional_ports内再添加一个，注意逗号分隔），protocol必须为auth_aes128_md5或auth_aes128_sha1，protocol_param只需且必须写一个#。（直接复制以上内容时记得修改密码配置）</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">第四部分：高级端口转发</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 如果设置多个多用户端口，想设置不同端口不同的转发规则以最大化伪装为其它服务，例如开了80端口和443端口作为多用户端口（以additional_ports方式作为示例）：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “additional_ports” : {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “80”: {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “passwd”: “pubpassword”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “method”: “aes-128-ctr”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol”: “auth_aes128_md5”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol_param”: “#”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs”: “tls1.2_ticket_auth_compatible”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs_param”: “”</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> },</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “443”: {</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “passwd”: “pubpassword”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “method”: “aes-128-ctr”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol”: “auth_aes128_md5”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “protocol_param”: “#”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs”: “tls1.2_ticket_auth_compatible”,</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “obfs_param”: “”</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> }</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> },</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 同时本地的nginx/apache开启端口1080和1443，那么在user-config.json里修改如下参数：</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> “redirect” : [“<em>:80#127.0.0.1:1080”, “</em>:443#127.0.0.1:1443”],</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">配置好后，直接访问80或443端口，将是个正常的网站，用SSR去连接则为代理服务。</span><br><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> 其它：nginx的rewrite规则默认会使用监听的端口，这时会导致rewrite有问题，需要指定一下端口号</span></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 10pt;&quot;&gt;第一部分：直接修改服务端配置文件大法，仅适用于使用单用户配置的情况&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-f
      
    
    </summary>
    
      <category term="转载存档" scheme="http://www.rpchen.com/categories/%E8%BD%AC%E8%BD%BD%E5%AD%98%E6%A1%A3/"/>
    
    
  </entry>
  
  <entry>
    <title>SSR搭建</title>
    <link href="http://www.rpchen.com/2017/12/04/ssr-e6-90-ad-e5-bb-ba/"/>
    <id>http://www.rpchen.com/2017/12/04/ssr-e6-90-ad-e5-bb-ba/</id>
    <published>2017-12-04T07:35:01.000Z</published>
    <updated>2017-12-29T03:44:34.913Z</updated>
    
    <content type="html"><![CDATA[<pre><span style="font-family: arial, helvetica, sans-serif; font-size: 10pt;">SSR服务器端搭建wget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.shchmod +x shadowsocksR.sh./shadowsocksR.sh 2\&gt;&amp;1 \| tee shadowsocksR.logshadowsocks.json 位置/etc/shadowsocks.json重启进程/etc/init.d/shadowsocks restart卸载./shadowsocksR.sh uninstall</span></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;pre&gt;&lt;span style=&quot;font-family: arial, helvetica, sans-serif; font-size: 10pt;&quot;&gt;SSR服务器端搭建
wget --no-check-certificate https://raw.githubuserc
      
    
    </summary>
    
      <category term="上网" scheme="http://www.rpchen.com/categories/%E4%B8%8A%E7%BD%91/"/>
    
    
  </entry>
  
</feed>
